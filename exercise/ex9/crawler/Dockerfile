FROM node:alpine

RUN apk update
RUN adduser -D crawler

WORKDIR /home/crawler
COPY . .
RUN chown -R root:crawler .

RUN apk add --no-cache \
      chromium 

ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true \
    PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser
    
RUN npm install